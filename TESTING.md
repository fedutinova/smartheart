# SmartHeart Testing Guide

## Overview

SmartHeart –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è EKG –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã.

## –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### üî¨ Unit —Ç–µ—Å—Ç—ã
- **EKG Preprocessor** (`internal/ekg/preprocessor_test.go`)
- **EKG Handler** (`internal/workers/ekg_handler_test.go`)
- **HTTP Handlers** (`internal/transport/http/handlers_ekg_test.go`)

### üîó Integration —Ç–µ—Å—Ç—ã
- **EKG Integration** (`internal/workers/ekg_integration_test.go`)
- **HTTP API —Ç–µ—Å—Ç—ã**
- **Database —Ç–µ—Å—Ç—ã**

### üìä Benchmark —Ç–µ—Å—Ç—ã
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å HTTP handlers
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –í—Å–µ —Ç–µ—Å—Ç—ã
```bash
make test
```

### –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
```bash
make test-unit
```

### –¢–æ–ª—å–∫–æ EKG —Ç–µ—Å—Ç—ã
```bash
make test-ekg
```

### –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
```bash
make test-coverage
```

### –¢–µ—Å—Ç—ã —Å race detection
```bash
make test-race
```

### Benchmark —Ç–µ—Å—Ç—ã
```bash
make benchmark-ekg
```

## –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
go run ./testdata/setup.go
```

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **EKG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ EKG —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –ü—Ä–æ—Å—Ç—ã–µ —Ü–≤–µ—Ç–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã**: –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ —Ä–∞–∑–º–µ—Ä–∞
- **–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**: –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ EKG –æ–±—Ä–∞–±–æ—Ç–∫–∏

### Unit —Ç–µ—Å—Ç—ã preprocessor
```bash
go test -v ./internal/ekg/
```

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç:
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≤ grayscale
- –£—Å–∏–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞
- –ë–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏—é
- –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç—É—Ä–æ–≤
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ —Å–∏–≥–Ω–∞–ª–∞

### Unit —Ç–µ—Å—Ç—ã handler
```bash
go test -v ./internal/workers/
```

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç:
- –û–±—Ä–∞–±–æ—Ç–∫—É EKG –∑–∞–¥–∞—á
- –ó–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—é URL
- –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### Integration —Ç–µ—Å—Ç—ã
```bash
go test -v -tags=integration ./internal/workers/
```

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç:
- –ü–æ–ª–Ω—ã–π pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏
- HTTP –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫
- –¢–∞–π–º–∞—É—Ç—ã –∏ –ª–∏–º–∏—Ç—ã
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP API

### EKG API endpoints
```bash
go test -v ./internal/transport/http/
```

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç:
- `POST /v1/ekg/analyze` - –û—Ç–ø—Ä–∞–≤–∫–∞ EKG –∞–Ω–∞–ª–∏–∑–∞
- `GET /v1/jobs/{id}` - –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
- `GET /v1/requests/{id}` - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
- `GET /v1/requests` - –°–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
- –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞
- –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –û—à–∏–±–∫–∏ –æ—á–µ—Ä–µ–¥–∏
- –†–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## Mock –æ–±—ä–µ–∫—Ç—ã

### MockJobQueue
- –ò–º–∏—Ç–∏—Ä—É–µ—Ç –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### MockStorage
- –ò–º–∏—Ç–∏—Ä—É–µ—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ URL
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –æ—à–∏–±–∫–∏

### MockRepository
- –ò–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
```bash
make test-coverage
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞
–û—Ç–∫—Ä–æ–π—Ç–µ `coverage.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞.

### –¶–µ–ª–µ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- **EKG –º–æ–¥—É–ª–∏**: >90%
- **HTTP handlers**: >85%
- **Workers**: >80%
- **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: >80%

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### Benchmark —Ç–µ—Å—Ç—ã
```bash
make benchmark
```

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: <5 —Å–µ–∫—É–Ω–¥
- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞**: <30 —Å–µ–∫—É–Ω–¥
- **HTTP –∑–∞–ø—Ä–æ—Å**: <1 —Å–µ–∫—É–Ω–¥–∞
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏**: <100ms

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# CPU –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
go test -cpuprofile=cpu.prof -bench=.

# Memory –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
go test -memprofile=mem.prof -bench=.

# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª–µ–π
go tool pprof cpu.prof
go tool pprof mem.prof
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CI/CD

### GitHub Actions
```yaml
- name: Run tests
  run: make test-full

- name: Upload coverage
  uses: codecov/codecov-action@v3
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è CI —Å–∏–º—É–ª—è—Ü–∏—è
```bash
make ci-test
make ci-build
```

## –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
```bash
go test -v -race ./internal/ekg/
```

### –û—Ç–ª–∞–¥–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
```bash
go test -run TestPreprocessImage -v ./internal/ekg/
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö
```go
t.Logf("Debug info: %+v", debugData)
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### OpenCV –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ OpenCV —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `CGO_ENABLED=1`
- –î–ª—è Docker –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑

### Race conditions
- –í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å `-race`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º—å—é—Ç–µ–∫—Å—ã –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

### Memory leaks
- –¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—é—Ç —Ä–µ—Å—É—Ä—Å—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `defer` –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–æ–≤ –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å –ø–æ–º–æ—â—å—é `go test -race`

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `*_test.go`
2. –î–æ–±–∞–≤—å—Ç–µ unit —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
3. –°–æ–∑–¥–∞–π—Ç–µ integration —Ç–µ—Å—Ç—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
4. –î–æ–±–∞–≤—å—Ç–µ benchmark —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
1. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ `testdata/`
2. –û–±–Ω–æ–≤–∏—Ç–µ `testdata/test_images.go`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `go run ./testdata/setup.go`

### Mock –æ–±—ä–µ–∫—Ç—ã
1. –†–∞—Å—à–∏—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ mock –æ–±—ä–µ–∫—Ç—ã
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ mock –æ–±—ä–µ–∫—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
3. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –º–æ–∫–æ–≤

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–±–ª–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤

### –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- –í—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã –≤ —Ç–µ—Å—Ç–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `defer` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

### –ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º
- –ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤
- –ò–∑–±–µ–≥–∞–π—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ unit —Ç–µ—Å—Ç–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç—ã –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

## Troubleshooting

### –¢–µ—Å—Ç—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go mod tidy

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ OpenCV
pkg-config --modversion opencv4

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go clean -modcache
go mod download
```

### –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
go test -v ./internal/ekg/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ race conditions
go test -race ./internal/ekg/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
go test -cover ./internal/ekg/
```

### –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º
go test -cpuprofile=cpu.prof -bench=.

# –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
go tool pprof cpu.prof
```
